
<!DOCTYPE html>
<html>
<head>
	<title>Konnichi Wave</title>
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="viewport" content="width=device-width, minimal-ui, initial-scale=1, maximum-scale=1, user-scalable=0">

	<link rel="stylesheet" type="text/css" href="styles.css"/>

	<script type="text/javascript" src="blobblaster.min.js"></script>
</head>

<body id="xibalba" class="desktop webgl">
	<div class="panel desktop-only">
		<h1>
			Demo Game using the
			<a href="http://github.com/phoboslab/twopointfive">TwoPointFive Plugin</a>
			for
			<a href="http://impactjs.com/">Impact</a>
		</h1>
	</div>

	<div id="game" class="webgl-only">
		<canvas id="canvas" class="landscape-only"></canvas>

		<div id="rotate-to-play" class="mobile-only portrait-only">
			<div><img src="media/rotate.png"/></div>
			Rotate to Landscape to play!
		</div>

		<div class="panel desktop-only">
			<div class="option">
				<input type="checkbox" id="requestFullscreen"/>
				<label for="requestFullscreen"><span></span>Fullscreen</label>
			</div>
			<audio id="bgmusic" autoplay="autoplay" controls="controls" loop="loop">
  				<source src="media/sounds/bg1.ogg"/>
			</audio>
			<div class="option">
				<input type="checkbox" id="riftStereoMode"/>
				<label for="riftStereoMode"><span></span>Oculus Rift DK2 Stereo Rendering</label>
				â€“ requires the <a href="http://blog.tojicode.com/2014/07/bringing-vr-to-chrome.html">Chrome WebVR Build</a>
			</div>
		</div>
	</div>

	<div class="no-webgl-only">
		<div id="no-webgl-notice" class="panel">
			<p>
				Your browser does not support WebGL. Try
				<a href="http://www.google.com/chrome">Chrome</a> or
				<a href="http://www.mozilla.com/firefox/">Firefox</a>.
			</p>
			<p>
				Mobile Safari has WebGL support in iOS 8
			</p>
		</div>
	</div>
	<script type="text/javascript">
		var aud = document.getElementById("bgmusic");
		aud.volume = 0.2;

		function promptSubmit(score) {
		  let username = '';

		  if (confirm(`You scored ${score} wavebacks, do you want to submit this score?`)) {
		    while (!username) {
		      username = prompt("Please enter your name");
		      if (username) {
		        submitScore(username, score);
		      }
		    }
		  }
		}

		function submitScore(username, score) {
		  const request = new XMLHttpRequest();
		  request.open('POST', 'scripts/submitScore.php', true);
		  request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');
		  request.send({ username, score });
		}


	</script>
</body>
</html>
